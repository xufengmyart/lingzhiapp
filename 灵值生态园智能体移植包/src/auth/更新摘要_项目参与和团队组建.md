# 更新摘要：项目参与和团队组建功能

**更新日期**：2026年1月24日
**更新类型**：核心功能新增
**版本**：v1.0

---

## 📋 更新概述

本次更新为"媄月商业艺术"系统添加了完整的项目参与和团队组建功能，实现了从购买创业机会到组建团队、聘请专家的全流程管理。

---

## 🎯 核心功能

### 1. 创业机会管理
- **最低参与定价**：99元
- **查看权限控制**：购买后自动获得项目详情查看权限
- **参与人数限制**：可设置最少和最多参与人数
- **推荐佣金机制**：支持推荐人获取佣金（可配置比例）
- **利润分配机制**：可配置利润分配比例

### 2. 团队组建机制
- **团队创建**：支持创建团队并设置最大成员数
- **成员添加**：每增加一名成员需支付1000元费用
- **角色管理**：支持团队长、成员、专家、管理员等角色
- **费用管理**：自动计算团队总费用

### 3. 专家聘请功能
- **资源库专家**：从系统资源库选择专家（10位预设专家）
- **自行组建**：团队长可自行聘请外部专家
- **多种计费方式**：支持时薪、日薪、项目费
- **任务管理**：支持任务和交付物管理

---

## 📂 新增文件

### 1. models_project.py（全新文件）
**数据模型文件**，包含：

#### 创业机会相关表
- `Opportunity`：创业机会表
- `OpportunityParticipation`：参与记录表

#### 团队相关表
- `Team`：团队表
- `TeamMember`：团队成员表
- `TeamMilestone`：团队里程碑表

#### 专家相关表
- `Expert`：资源库专家表
- `TeamExpert`：团队专家表（资源库）
- `ExpertEngagement`：专家参与表（自行组建）

### 2. project_api.py（全新文件）
**API接口文件**，包含：

#### 创业机会接口（4个）
- `POST /api/projects/opportunities` - 创建创业机会
- `GET /api/projects/opportunities` - 获取机会列表
- `GET /api/projects/opportunities/{id}` - 获取机会详情
- `POST /api/projects/opportunities/purchase` - 购买机会

#### 团队组建接口（3个）
- `POST /api/projects/teams` - 创建团队
- `POST /api/projects/teams/{id}/members` - 添加团队成员
- `GET /api/projects/teams/{id}/members` - 获取团队成员列表

#### 专家聘请接口（3个）
- `GET /api/projects/experts` - 获取资源库专家列表
- `POST /api/projects/teams/{id}/experts/hire` - 聘请资源库专家
- `POST /api/projects/teams/{id}/experts/engage` - 自行组建专家

### 3. init_project.py（全新文件）
**初始化脚本**，功能：
- 初始化项目相关数据库表
- 创建10位资源库专家

### 4. 项目参与和团队组建使用手册.md（全新文件）
**完整的使用文档**，包含：
- 功能概述
- 核心规则说明
- API接口详解
- 使用场景示例
- 资源库专家列表

---

## 🔄 修改文件

### api.py（修改）
**新增导入**：
```python
# 导入项目参与和团队组建API
try:
    from project_api import router as project_router
    app.include_router(project_router)
    print("✓ 项目参与和团队组建API已加载")
except ImportError as e:
    print(f"警告：项目参与和团队组建API模块未找到: {str(e)}")
```

---

## 📊 核心规则总结

### 创业机会参与规则

| 项目 | 说明 |
|-----|------|
| 最低参与价格 | 99元 |
| 查看权限 | 购买后自动获得 |
| 推荐佣金比例 | 可配置（默认10%） |
| 利润分配比例 | 可配置（默认30%） |

### 团队组建规则

| 项目 | 说明 |
|-----|------|
| 每名成员费用 | 1000元 |
| 团队长费用 | 自动支付1000元 |
| 最大成员数 | 可配置（默认10人） |
| 费用总计 | 成员数 × 1000元 |

### 专家聘请规则

| 类型 | 说明 |
|-----|------|
| 资源库专家 | 从系统资源库选择 |
| 自行组建 | 团队长自行聘请外部专家 |
| 计费方式 | 时薪、日薪、项目费 |

---

## 👥 资源库专家列表

系统初始化时创建了10位资源库专家：

| 姓名 | 职位 | 专业领域 | 时薪 | 日薪 | 项目费 |
|-----|------|---------|------|------|--------|
| 张明 | 品牌营销专家 | 品牌策划、市场营销 | 500 | 3000 | 50000 |
| 李华 | 产品经理 | 产品规划、用户研究 | 600 | 3500 | 60000 |
| 王强 | 技术架构师 | 系统架构、云计算 | 700 | 4000 | 80000 |
| 赵丽 | UI/UX设计师 | 用户界面设计、用户体验 | 450 | 2800 | 45000 |
| 刘伟 | 运营专家 | 用户运营、社群运营 | 480 | 3000 | 48000 |
| 陈静 | 财务顾问 | 财务管理、投资分析 | 550 | 3200 | 55000 |
| 杨帆 | 法务专家 | 合同法、知识产权法 | 650 | 3800 | 70000 |
| 黄磊 | 品牌文化顾问 | 文化研究、品牌文化 | 520 | 3100 | 52000 |
| 吴敏 | 视频制作专家 | 视频策划、拍摄剪辑 | 400 | 2500 | 40000 |
| 周涛 | 数据分析专家 | 数据挖掘、数据分析 | 580 | 3400 | 58000 |

---

## 🚀 使用流程

### 1. 初始化系统

```bash
cd 灵值生态园智能体移植包/src/auth
python init_project.py
```

### 2. 启动服务

```bash
python api.py
```

### 3. 访问API文档

打开浏览器访问：http://localhost:8000/docs

### 4. 典型使用流程

#### 流程1：购买创业机会
1. 浏览创业机会列表
2. 选择机会并购买（支付99元）
3. 购买后自动获得项目详情查看权限

#### 流程2：组建团队
1. 创建团队（团队长支付1000元）
2. 添加团队成员（每增加一人支付1000元）
3. 查看团队信息

#### 流程3：聘请专家
1. 浏览资源库专家列表
2. 选择专家并发出聘请请求
3. 或自行组建专家团队

---

## 📝 API接口总览

| 分类 | 接口 | 方法 | 说明 |
|-----|------|------|------|
| 创业机会 | /api/projects/opportunities | POST | 创建创业机会 |
| 创业机会 | /api/projects/opportunities | GET | 获取机会列表 |
| 创业机会 | /api/projects/opportunities/{id} | GET | 获取机会详情 |
| 创业机会 | /api/projects/opportunities/purchase | POST | 购买机会 |
| 团队组建 | /api/projects/teams | POST | 创建团队 |
| 团队组建 | /api/projects/teams/{id}/members | POST | 添加成员 |
| 团队组建 | /api/projects/teams/{id}/members | GET | 获取成员列表 |
| 专家聘请 | /api/projects/experts | GET | 获取专家列表 |
| 专家聘请 | /api/projects/teams/{id}/experts/hire | POST | 聘请专家（资源库） |
| 专家聘请 | /api/projects/teams/{id}/experts/engage | POST | 聘请专家（自行组建） |

---

## ⚠️ 重要提醒

1. **购买权限**：只有购买创业机会后才能查看项目详情
2. **团队费用**：每增加一名成员需支付1000元
3. **专家费用**：资源库专家和自行组建专家的费用需要额外支付
4. **推荐佣金**：推荐人可获得购买金额的一定比例作为佣金
5. **角色权限**：只有团队长才能添加成员和聘请专家
6. **初始化脚本**：首次使用前必须运行 `python init_project.py`

---

## 🎨 使用示例

### 购买创业机会

```bash
# 登录获取Token
TOKEN=$(curl -s -X POST "http://localhost:8000/api/auth/login" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=xufeng@meiyue.com&password=Xu@2026" \
  | jq -r '.access_token')

# 购买机会
curl -X POST "http://localhost:8000/api/projects/opportunities/purchase" \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "opportunity_id": 1,
    "referrer_code": "PARTNER001"
  }'
```

### 创建团队

```bash
# 创建团队
curl -X POST "http://localhost:8000/api/projects/teams" \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "opportunity_id": 1,
    "name": "西安美学侦探团队A",
    "max_members": 10,
    "fee_per_member": 1000
  }'
```

### 聘请专家

```bash
# 聘请专家
curl -X POST "http://localhost:8000/api/projects/teams/1/experts/hire" \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "expert_id": 1,
    "role": "品牌顾问",
    "hourly_fee": 500,
    "tasks": "制定品牌策略"
  }'
```

---

## 📚 相关文档

- [项目参与和团队组建使用手册.md](./项目参与和团队组建使用手册.md) - 完整使用手册
- [README_v2.0.md](./README_v2.0.md) - 权限管理系统v2.0手册
- [数据库访问接口使用手册.md](./数据库访问接口使用手册.md) - 数据库访问接口文档

---

## 📞 技术支持

- **技术支持**：tech@meiyue.com
- **业务咨询**：business@meiyue.com

---

**媄月商业艺术 - 文化科技驱动的品牌未来资产**
**© 2026 媄月商业 版权所有 | 未经授权不得复制、下载、传播**

---

**更新完成日期**：2026年1月24日
**更新执行人**：灵值生态团队
**文档版本**：v1.0
