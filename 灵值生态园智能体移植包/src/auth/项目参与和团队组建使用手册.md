# 项目参与和团队组建功能使用手册

**版本**：v1.0
**发布日期**：2026年1月24日
**核心功能**：创业机会购买、团队组建、专家聘请

---

## 📋 功能概述

本次更新为"媄月商业艺术"系统添加了完整的项目参与和团队组建功能，核心特性包括：

1. **创业机会管理**：最低参与定价99元，购买后可查看详情
2. **团队组建机制**：每增加一名成员需支付1000元费用
3. **专家聘请功能**：支持从资源库聘请专家或自行组建专家团队
4. **推荐佣金机制**：支持推荐人获取佣金（可配置比例）

---

## 🎯 核心规则

### 创业机会参与规则

| 项目 | 说明 |
|-----|------|
| **最低参与价格** | 99元 |
| **查看权限** | 购买后自动获得项目详情查看权限 |
| **参与人数** | 可设置最少和最多参与人数限制 |
| **推荐佣金** | 可配置推荐佣金比例（默认10%） |
| **利润分配** | 可配置利润分配比例（默认30%） |

### 团队组建规则

| 项目 | 说明 |
|-----|------|
| **每名成员费用** | 1000元 |
| **团队长** | 自动成为第一个成员，需支付1000元 |
| **最大成员数** | 可配置（默认10人） |
| **费用总计** | 成员数 × 1000元 |

### 专家聘请规则

#### 资源库专家聘请
- 从系统资源库选择专家
- 支持时薪、日薪、项目费等多种计费方式
- 专家需经团队长审批后才能加入

#### 自行组建专家
- 团队长可以自行聘请外部专家
- 记录专家信息和费用
- 支持任务和交付物管理

---

## 🚀 快速开始

### 第一步：初始化数据库

```bash
cd 灵值生态园智能体移植包/src/auth
python init_project.py
```

初始化成功后，系统会创建：
- 项目相关数据库表
- 10位资源库专家（涵盖品牌、产品、技术、设计、运营、财务、法务等领域）

### 第二步：启动API服务

```bash
python api.py
```

服务将在 http://localhost:8000 启动

### 第三步：访问API文档

打开浏览器访问：http://localhost:8000/docs

---

## 📊 API接口列表

### 创业机会接口

#### 1. 创建创业机会
**接口**：`POST /api/projects/opportunities`

**请求示例**：
```json
{
  "title": "西安美学侦探项目",
  "description": "探索西安城市美学的创新项目",
  "detailed_info": "详细的项目计划和预算说明...",
  "price": 99,
  "min_participants": 10,
  "max_participants": 50,
  "team_building_fee": 1000,
  "profit_ratio": 30,
  "commission_ratio": 10,
  "tags": "西安,美学,文化",
  "requirements": "对西安文化有浓厚兴趣",
  "benefits": "获得项目分红和股权",
  "risk_warning": "投资有风险，请谨慎参与"
}
```

#### 2. 获取创业机会列表
**接口**：`GET /api/projects/opportunities`

**查询参数**：
- `status`：筛选状态（可选）

**响应示例**：
```json
[
  {
    "id": 1,
    "code": "OPPABC123",
    "title": "西安美学侦探项目",
    "description": "探索西安城市美学的创新项目",
    "detailed_info": null,  // 购买后可见
    "price": 99,
    "min_participants": 10,
    "max_participants": 50,
    "current_participants": 5,
    "team_building_fee": 1000,
    "profit_ratio": 30,
    "commission_ratio": 10,
    "status": "active",
    "has_access": false,  // 是否有权限查看详情
    "can_join": true  // 是否可以加入
  }
]
```

#### 3. 获取创业机会详情
**接口**：`GET /api/projects/opportunities/{opportunity_id}`

#### 4. 购买创业机会
**接口**：`POST /api/projects/opportunities/purchase`

**请求示例**：
```json
{
  "opportunity_id": 1,
  "referrer_code": "PARTNER001"  // 可选：推荐人代码
}
```

**响应示例**：
```json
{
  "message": "购买成功！您现在可以查看项目详情",
  "participation_id": 1,
  "has_access": true,
  "purchase_amount": 99
}
```

---

### 团队组建接口

#### 1. 创建团队
**接口**：`POST /api/projects/teams`

**前提条件**：
- 必须是合伙人
- 必须已购买该创业机会

**请求示例**：
```json
{
  "opportunity_id": 1,
  "name": "西安美学侦探团队A",
  "max_members": 10,
  "fee_per_member": 1000,
  "description": "探索西安城市美学的创新团队",
  "goals": "打造西安最专业的美学探索团队"
}
```

**响应示例**：
```json
{
  "message": "团队创建成功",
  "team_id": 1,
  "team_code": "TMXYZ789",
  "name": "西安美学侦探团队A",
  "current_members": 1,
  "max_members": 10,
  "fee_per_member": 1000
}
```

#### 2. 添加团队成员
**接口**：`POST /api/projects/teams/{team_id}/members`

**前提条件**：
- 必须是团队长

**请求示例**：
```json
{
  "partner_id": 3,
  "role": "member",
  "contribution": 0
}
```

**响应示例**：
```json
{
  "message": "成员添加成功",
  "team_member_id": 2,
  "current_members": 2,
  "total_fee": 2000
}
```

#### 3. 获取团队成员列表
**接口**：`GET /api/projects/teams/{team_id}/members`

**响应示例**：
```json
{
  "team": {
    "id": 1,
    "name": "西安美学侦探团队A",
    "current_members": 2,
    "max_members": 10,
    "total_fee": 2000,
    "fee_per_member": 1000
  },
  "members": [
    {
      "id": 1,
      "partner_id": 2,
      "role": "leader",
      "contribution": 0,
      "fee_paid": 1000,
      "status": "active"
    },
    {
      "id": 2,
      "partner_id": 3,
      "role": "member",
      "contribution": 0,
      "fee_paid": 1000,
      "status": "active"
    }
  ],
  "experts": [],
  "engagements": []
}
```

---

### 专家聘请接口

#### 1. 获取资源库专家列表
**接口**：`GET /api/projects/experts`

**查询参数**：
- `expertise`：专业领域（可选）
- `min_rating`：最低评分（可选）

**响应示例**：
```json
[
  {
    "id": 1,
    "code": "EXPABC123",
    "name": "张明",
    "title": "品牌营销专家",
    "expertise": "品牌策划,市场营销,数字营销,内容营销",
    "description": "拥有15年品牌营销经验...",
    "hourly_rate": 500,
    "daily_rate": 3000,
    "project_rate": 50000,
    "rating": 4.8,
    "review_count": 120,
    "avatar": null
  }
]
```

#### 2. 聘请资源库专家
**接口**：`POST /api/projects/teams/{team_id}/experts/hire`

**请求示例**：
```json
{
  "expert_id": 1,
  "role": "品牌顾问",
  "hourly_fee": 500,
  "start_date": "2026-02-01T00:00:00",
  "end_date": "2026-04-30T00:00:00",
  "tasks": "制定品牌策略和营销方案",
  "deliverables": "品牌策略文档、营销计划"
}
```

**响应示例**：
```json
{
  "message": "专家聘请请求已提交",
  "team_expert_id": 1,
  "expert_name": "张明",
  "hourly_fee": 500
}
```

#### 3. 自行组建专家
**接口**：`POST /api/projects/teams/{team_id}/experts/engage`

**请求示例**：
```json
{
  "expert_name": "李四",
  "expertise": "品牌策划",
  "contact": "lisi@example.com",
  "hourly_rate": 400,
  "start_date": "2026-02-01T00:00:00",
  "end_date": "2026-04-30T00:00:00",
  "tasks": "品牌策划和设计",
  "deliverables": "品牌设计方案"
}
```

**响应示例**：
```json
{
  "message": "专家组建成功",
  "engagement_id": 1,
  "expert_name": "李四",
  "hourly_rate": 400
}
```

---

## 👥 资源库专家

系统初始化时创建了10位资源库专家，涵盖以下领域：

| 姓名 | 职位 | 专业领域 | 时薪 | 日薪 | 项目费 |
|-----|------|---------|------|------|--------|
| 张明 | 品牌营销专家 | 品牌策划、市场营销、数字营销、内容营销 | 500 | 3000 | 50000 |
| 李华 | 产品经理 | 产品规划、用户研究、数据分析、项目管理 | 600 | 3500 | 60000 |
| 王强 | 技术架构师 | 系统架构、云计算、微服务、数据库设计 | 700 | 4000 | 80000 |
| 赵丽 | UI/UX设计师 | 用户界面设计、用户体验设计、交互设计 | 450 | 2800 | 45000 |
| 刘伟 | 运营专家 | 用户运营、内容运营、社群运营、活动运营 | 480 | 3000 | 48000 |
| 陈静 | 财务顾问 | 财务管理、投资分析、税务筹划、风险控制 | 550 | 3200 | 55000 |
| 杨帆 | 法务专家 | 合同法、公司法、知识产权法、劳动法 | 650 | 3800 | 70000 |
| 黄磊 | 品牌文化顾问 | 文化研究、品牌文化、内容创作、IP打造 | 520 | 3100 | 52000 |
| 吴敏 | 视频制作专家 | 视频策划、拍摄剪辑、特效制作、短视频运营 | 400 | 2500 | 40000 |
| 周涛 | 数据分析专家 | 数据挖掘、数据分析、机器学习、数据可视化 | 580 | 3400 | 58000 |

---

## 📝 使用场景

### 场景1：用户购买创业机会

```bash
# 1. 浏览创业机会列表
curl -X GET "http://localhost:8000/api/projects/opportunities" \
  -H "Authorization: Bearer YOUR_TOKEN"

# 2. 购买机会（支付99元）

**支付方式**：
- 微信收款：扫描下方微信收款码支付99元
  ![微信收款码](../../assets/个人微信收款码.jpg)
- 支付宝收款：扫描下方支付宝收款码支付99元
  ![支付宝收款码](../../assets/个人支付宝收款码.jpg)

支付完成后，请将支付凭证发送至客服邮箱：meiyue@meiyueart.cn

```bash
curl -X POST "http://localhost:8000/api/projects/opportunities/purchase" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "opportunity_id": 1,
    "referrer_code": "PARTNER001"
  }'

# 3. 购买后查看项目详情
curl -X GET "http://localhost:8000/api/projects/opportunities/1" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### 场景2：团队长组建团队

```bash
# 1. 创建团队（团队长支付1000元）

**支付方式**：
- 微信收款：扫描下方微信收款码支付1000元
  ![微信收款码](../../assets/个人微信收款码.jpg)
- 支付宝收款：扫描下方支付宝收款码支付1000元
  ![支付宝收款码](../../assets/个人支付宝收款码.jpg)

支付完成后，请将支付凭证发送至客服邮箱：meiyue@meiyueart.cn

```bash
curl -X POST "http://localhost:8000/api/projects/teams" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "opportunity_id": 1,
    "name": "西安美学侦探团队A",
    "max_members": 10,
    "fee_per_member": 1000
  }'

# 2. 添加成员（每增加一人支付1000元）

**支付方式**：
- 微信收款：扫描下方微信收款码支付1000元
  ![微信收款码](../../assets/个人微信收款码.jpg)
- 支付宝收款：扫描下方支付宝收款码支付1000元
  ![支付宝收款码](../../assets/个人支付宝收款码.jpg)

支付完成后，请将支付凭证发送至客服邮箱：meiyue@meiyueart.cn

```bash
curl -X POST "http://localhost:8000/api/projects/teams/1/members" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "partner_id": 3,
    "role": "member"
  }'

# 3. 查看团队成员
curl -X GET "http://localhost:8000/api/projects/teams/1/members" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### 场景3：聘请资源库专家

```bash
# 1. 浏览资源库专家
curl -X GET "http://localhost:8000/api/projects/experts?expertise=品牌" \
  -H "Authorization: Bearer YOUR_TOKEN"

# 2. 聘请专家
curl -X POST "http://localhost:8000/api/projects/teams/1/experts/hire" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "expert_id": 1,
    "role": "品牌顾问",
    "hourly_fee": 500,
    "tasks": "制定品牌策略"
  }'
```

---

## ⚠️ 重要提醒

1. **购买权限**：只有购买创业机会后才能查看项目详情
2. **团队费用**：每增加一名成员需支付1000元
3. **专家费用**：资源库专家和自行组建专家的费用需要额外支付
4. **推荐佣金**：推荐人可获得购买金额的一定比例作为佣金（可配置）
5. **角色权限**：只有团队长才能添加成员和聘请专家

---

## 🔄 数据模型说明

### 新增表结构

#### opportunities（创业机会表）
- 存储创业机会的基本信息
- 包含定价、参与人数限制、利润分配比例等

#### opportunity_participations（参与记录表）
- 记录用户购买创业机会的信息
- 控制用户是否可以查看项目详情

#### teams（团队表）
- 存储团队基本信息
- 记录团队组建费用

#### team_members（团队成员表）
- 记录团队成员信息
- 记录每名成员支付的费用

#### experts（专家表）
- 存储资源库专家信息

#### team_experts（团队专家表）
- 记录从资源库聘请的专家

#### expert_engagements（专家参与表）
- 记录自行组建的专家

---

## 📞 技术支持

- **技术支持**：tech@meiyue.com
- **业务咨询**：business@meiyue.com

---

**媄月商业艺术 - 文化科技驱动的品牌未来资产**
**© 2026 媄月商业 版权所有 | 未经授权不得复制、下载、传播**
