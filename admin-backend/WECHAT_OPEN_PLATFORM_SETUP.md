# å¾®ä¿¡å¼€æ”¾å¹³å°é…ç½®æŒ‡å—

## é—®é¢˜æè¿°

å¦‚æœæ‚¨é‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š
- "Scope å‚æ•°é”™è¯¯æˆ–æ²¡æœ‰ Scope æƒé™"
- "redirect_uri å‚æ•°é”™è¯¯"
- å¾®ä¿¡æ‰«ç é¡µé¢æ— æ³•æ­£å¸¸æ˜¾ç¤º

**åŸå› **ï¼šç³»ç»Ÿä½¿ç”¨çš„æ˜¯**å¾®ä¿¡å°ç¨‹åºçš„ AppID**ï¼Œè€Œä¸æ˜¯**å¾®ä¿¡å¼€æ”¾å¹³å°ç½‘ç«™åº”ç”¨çš„ AppID**ã€‚

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šé…ç½®å¾®ä¿¡å¼€æ”¾å¹³å°ï¼ˆæ¨èï¼‰

å¦‚æœæ‚¨æœ‰å¾®ä¿¡å¼€æ”¾å¹³å°è´¦å·ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®ï¼š

#### 1. æ³¨å†Œå¾®ä¿¡å¼€æ”¾å¹³å°è´¦å·

è®¿é—®ï¼šhttps://open.weixin.qq.com/

ä½¿ç”¨æ‚¨çš„å¾®ä¿¡è´¦å·ç™»å½•ï¼Œå®Œæˆå¼€å‘è€…è®¤è¯ï¼ˆéœ€è¦å·²è®¤è¯çš„æœåŠ¡å·æˆ–å°ç¨‹åºï¼‰ã€‚

#### 2. åˆ›å»ºç½‘ç«™åº”ç”¨

1. ç™»å½•åï¼Œè¿›å…¥"ç®¡ç†ä¸­å¿ƒ"
2. ç‚¹å‡»"ç½‘ç«™åº”ç”¨"
3. ç‚¹å‡»"åˆ›å»ºç½‘ç«™åº”ç”¨"
4. å¡«å†™åº”ç”¨ä¿¡æ¯ï¼š
   - **åº”ç”¨åç§°**ï¼šçµå€¼ç”Ÿæ€å›­
   - **åº”ç”¨ç®€ä»‹**ï¼šçµå€¼ç”Ÿæ€å›­æ™ºèƒ½ä½“ç³»ç»Ÿ
   - **åº”ç”¨å®˜ç½‘**ï¼šhttps://meiyueart.com
   - **åº”ç”¨å›¾æ ‡**ï¼šä¸Šä¼ åº”ç”¨Logo
5. æäº¤å®¡æ ¸ï¼ˆé€šå¸¸éœ€è¦1-3ä¸ªå·¥ä½œæ—¥ï¼‰

#### 3. è·å– AppID å’Œ AppSecret

å®¡æ ¸é€šè¿‡åï¼Œæ‚¨å°†è·å¾—ï¼š
- **AppID**ï¼šä»¥ `wx` å¼€å¤´çš„18ä½å­—ç¬¦ä¸²
- **AppSecret**ï¼š32ä½çš„å¯†é’¥

#### 4. é…ç½®æˆæƒå›è°ƒåŸŸå

1. è¿›å…¥åº”ç”¨è¯¦æƒ…é¡µé¢
2. æ‰¾åˆ°"æˆæƒå›è°ƒåŸŸå"é…ç½®é¡¹
3. æ·»åŠ åŸŸåï¼š`meiyueart.com`
4. ä¿å­˜é…ç½®

#### 5. æ›´æ–°ç³»ç»Ÿé…ç½®

ç¼–è¾‘ `admin-backend/.env` æ–‡ä»¶ï¼Œä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š

```env
# å¾®ä¿¡å¼€æ”¾å¹³å°é…ç½®ï¼ˆç”¨äºPCç«¯ç½‘é¡µæ‰«ç ç™»å½•ï¼‰
WECHAT_OPEN_PLATFORM_APPID=wx8712f1a78f1d14a6  # æ›¿æ¢ä¸ºæ‚¨çš„ç½‘ç«™åº”ç”¨ AppID
WECHAT_OPEN_PLATFORM_APPSECRET=acb72ce03801221a6b8eae05a87887ad  # æ›¿æ¢ä¸ºæ‚¨çš„ AppSecret
```

#### 6. é‡å¯åç«¯æœåŠ¡

```bash
cd /app/meiyueart-backend
source venv/bin/activate
pkill -f "python.*app.py"
nohup python app.py > /var/log/meiyueart-backend/app.log 2>&1 &
```

#### 7. æµ‹è¯•

è®¿é—®ï¼šhttps://meiyueart.com
å°è¯•ä½¿ç”¨å¾®ä¿¡æ‰«ç ç™»å½•ã€‚

---

### æ–¹æ¡ˆäºŒï¼šä½¿ç”¨æ‰‹æœºå·ç™»å½•ï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰

å¦‚æœæ‚¨æš‚æ—¶æ²¡æœ‰å¾®ä¿¡å¼€æ”¾å¹³å°è´¦å·ï¼Œå¯ä»¥ä½¿ç”¨æ‰‹æœºå·ç™»å½•ï¼š

#### ç®¡ç†å‘˜è´¦å·
- ç”¨æˆ·åï¼š`admin`
- å¯†ç ï¼š`123456`

#### æ™®é€šç”¨æˆ·
- ç”¨æˆ·åï¼š`é©¬ä¼Ÿå¨Ÿ`
- å¯†ç ï¼š`123`

---

## æ³¨æ„äº‹é¡¹

### âš ï¸ AppID ç±»å‹åŒºåˆ†

- **å¾®ä¿¡å°ç¨‹åº AppID**ï¼šç”¨äºå°ç¨‹åºç™»å½•ï¼Œæ ¼å¼å¦‚ `wx8712f1a78f1d14a6`
- **å¾®ä¿¡å¼€æ”¾å¹³å°ç½‘ç«™åº”ç”¨ AppID**ï¼šç”¨äºPCç«¯ç½‘é¡µæ‰«ç ç™»å½•ï¼Œæ ¼å¼ä¹Ÿæ˜¯ `wx` å¼€å¤´
- **ä¸¤è€…ä¸èƒ½æ··ç”¨**ï¼Œå¿…é¡»ä½¿ç”¨æ­£ç¡®çš„ AppID

### ğŸ”’ å®‰å…¨æç¤º

- ä¸è¦å°† `AppSecret` æäº¤åˆ° Git ä»“åº“
- ä¸è¦åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­æš´éœ² `AppSecret`
- å®šæœŸæ›´æ¢ `AppSecret` ä»¥æé«˜å®‰å…¨æ€§

### ğŸ“‹ Scope å‚æ•°è¯´æ˜

- `snsapi_login`ï¼šç”¨äºå¾®ä¿¡å¼€æ”¾å¹³å°ç½‘ç«™åº”ç”¨æ‰«ç ç™»å½•
- `snsapi_userinfo`ï¼šç”¨äºå…¬ä¼—å·æˆæƒç™»å½•ï¼Œå¯è·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯
- `snsapi_base`ï¼šç”¨äºå…¬ä¼—å·é™é»˜æˆæƒï¼Œä»…è·å–openid

### ğŸŒ åŸŸåè¦æ±‚

- æˆæƒå›è°ƒåŸŸå**ä¸éœ€è¦**æ·»åŠ  `https://` æˆ– `http://`
- åŸŸåå¿…é¡»æ˜¯å·²å¤‡æ¡ˆçš„åŸŸå
- åŸŸåå¿…é¡»èƒ½å¤Ÿè¢«å¾®ä¿¡æœåŠ¡å™¨è®¿é—®

---

## æµ‹è¯•æ¥å£

### æ£€æŸ¥å¾®ä¿¡é…ç½®çŠ¶æ€

```bash
curl https://meiyueart.com/api/wechat/oauth/config
```

è¿”å›ç¤ºä¾‹ï¼ˆæœªé…ç½®ï¼‰ï¼š
```json
{
  "success": true,
  "data": {
    "config": {
      "is_configured": false,
      "app_type": "none",
      "appid": "",
      "redirect_uri": "https://meiyueart.com/api/wechat/oauth/callback"
    },
    "available_login_methods": [
      {
        "type": "phone",
        "name": "æ‰‹æœºå·ç™»å½•",
        "url": "/api/login",
        "description": "ä½¿ç”¨æ‰‹æœºå·å’Œå¯†ç ç™»å½•"
      }
    ]
  }
}
```

è¿”å›ç¤ºä¾‹ï¼ˆå·²é…ç½®ï¼‰ï¼š
```json
{
  "success": true,
  "data": {
    "config": {
      "is_configured": true,
      "app_type": "website",
      "appid": "wx8712f1***",
      "redirect_uri": "https://meiyueart.com/api/wechat/oauth/callback"
    },
    "available_login_methods": [
      {
        "type": "phone",
        "name": "æ‰‹æœºå·ç™»å½•",
        "url": "/api/login",
        "description": "ä½¿ç”¨æ‰‹æœºå·å’Œå¯†ç ç™»å½•"
      },
      {
        "type": "wechat",
        "name": "å¾®ä¿¡æ‰«ç ç™»å½•",
        "url": "/api/wechat/oauth/authorize",
        "description": "ä½¿ç”¨å¾®ä¿¡æ‰«ç ç™»å½•"
      }
    ]
  }
}
```

---

## è”ç³»æ”¯æŒ

å¦‚æœé…ç½®è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·è”ç³»ï¼š
- æŠ€æœ¯æ”¯æŒé‚®ç®±ï¼šsupport@meiyueart.com
- å¾®ä¿¡ï¼šæ·»åŠ å¾®ä¿¡å®¢æœå·å’¨è¯¢

---

## æ›´æ–°æ—¥å¿—

- 2026-02-20ï¼šåˆ›å»ºé…ç½®æŒ‡å—
- 2026-02-20ï¼šæ·»åŠ é…ç½®æ£€æŸ¥æ¥å£
