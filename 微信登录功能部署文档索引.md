# 微信登录功能部署文档索引

本文档提供了微信登录功能从申请到部署的完整文档索引。

---

## 📚 文档列表

### 1. 微信登录集成指南.md
**用途：** 微信登录功能的总体介绍和配置说明

**内容包括：**
- 功能概述
- 配置步骤（微信开放平台申请）
- API 接口文档
- 前端页面说明
- 用户流程
- 常见问题
- 技术支持链接

**适合人群：** 开发人员、运维人员

---

### 2. 微信登录功能完成总结.md
**用途：** 微信登录功能的完成情况总结

**内容包括：**
- 功能概述
- 后端实现详情
- 前端实现详情
- 用户体验流程
- 技术亮点
- 配置要求
- 测试建议

**适合人群：** 项目经理、技术负责人

---

### 3. 微信登录功能详细操作指南.md ⭐
**用途：** 从申请到部署的详细步骤指南

**内容包括：**
- 微信开放平台申请网站应用（详细步骤）
- 获取 AppID 和 AppSecret
- 配置环境变量
- 本地测试微信登录
- 部署到生产环境
- 常见问题排查
- 附录（配置要求、安全检查清单等）

**适合人群：** 所有相关人员（必读）

---

### 4. 微信登录功能部署检查清单.md
**用途：** 部署验证和检查清单

**内容包括：**
- 部署前检查
- 配置检查
- 代码部署检查
- 功能测试检查
- API 接口检查
- 日志检查
- 安全检查
- 性能检查
- 兼容性检查
- 常见问题快速排查

**适合人群：** 测试人员、运维人员、部署人员

---

## 🚀 部署脚本

### deploy-wechat-login.sh
**用途：** 快速部署微信登录功能到生产环境

**功能：**
- 检查配置文件
- 上传后端代码
- 构建并上传前端代码
- 安装依赖
- 重启服务
- 更新 Nginx 配置
- 验证部署

**使用方法：**

```bash
# 方法 1：直接运行（使用默认配置）
./deploy-wechat-login.sh

# 方法 2：修改脚本中的配置后再运行
# 编辑 deploy-wechat-login.sh，修改以下变量：
# SERVER_USER="root"
# SERVER_HOST="123.56.142.143"
# SERVER_PASSWORD="Meiyue@root123"
```

**注意事项：**
1. 使用前必须先配置 `admin-backend/.env` 文件
2. 确保服务器可访问
3. 确保已安装 sshpass 工具
4. 确保前端可正常构建

---

## 📋 快速开始指南

### 如果你是第一次部署微信登录功能：

**步骤 1：阅读文档**
1. 阅读 `微信登录功能完成总结.md` - 了解功能概述
2. 阅读 `微信登录功能详细操作指南.md` - 了解详细步骤

**步骤 2：申请微信开放平台账号**
1. 访问 https://open.weixin.qq.com/
2. 按照详细指南申请账号和创建应用
3. 等待审核通过

**步骤 3：配置环境**
1. 复制 `admin-backend/.env.example` 到 `admin-backend/.env`
2. 填写微信配置信息（AppID、AppSecret、回调地址）
3. 在微信开放平台配置授权回调域

**步骤 4：测试**
1. 使用 ngrok 或类似工具进行本地测试
2. 验证微信登录流程
3. 验证信息完善流程

**步骤 5：部署**
1. 使用 `deploy-wechat-login.sh` 脚本快速部署
2. 或按照详细指南手动部署
3. 使用 `微信登录功能部署检查清单.md` 验证部署

**步骤 6：验证**
1. 访问生产环境网站
2. 测试微信登录
3. 测试信息完善
4. 检查日志确认无错误

---

### 如果你已经有微信开放平台账号：

**步骤 1：配置环境**
1. 获取 AppID 和 AppSecret
2. 配置 `admin-backend/.env` 文件
3. 配置微信开放平台授权回调域

**步骤 2：部署**
1. 运行 `./deploy-wechat-login.sh`
2. 或按照详细指南手动部署

**步骤 3：验证**
1. 使用 `微信登录功能部署检查清单.md` 验证
2. 测试微信登录功能

---

## 📝 配置文件说明

### admin-backend/.env
**用途：** 后端环境变量配置

**必填字段：**
```env
WECHAT_APP_ID=wx1234567890abcdef
WECHAT_APP_SECRET=1234567890abcdef1234567890abcdef
WECHAT_REDIRECT_URI=https://your-domain.com/wechat/callback
```

**注意事项：**
- 不要将此文件提交到版本控制系统
- AppSecret 是敏感信息，妥善保管
- 回调地址必须与微信开放平台配置一致

### admin-backend/.env.example
**用途：** 环境变量配置示例

**说明：** 可以复制此文件并修改为 `.env`

---

## 🔍 常见问题快速链接

### 微信开放平台相关
- [微信开放平台](https://open.weixin.qq.com/)
- [微信登录文档](https://developers.weixin.qq.com/doc/oplatform/Website_App/WeChat_Login/Wechat_Login.html)

### 部署相关
- 查看详细指南：`微信登录功能详细操作指南.md`
- 查看检查清单：`微信登录功能部署检查清单.md`

### 问题排查
- 常见问题：查看 `微信登录功能详细操作指南.md` 的"常见问题排查"章节
- API 测试：使用检查清单中的测试脚本
- 日志查看：`journalctl -u lingzhi-api -f`

---

## 🎯 部署流程图

```
准备阶段
├─ 申请微信开放平台账号
├─ 创建网站应用
├─ 获取 AppID 和 AppSecret
└─ 配置授权回调域

配置阶段
├─ 配置 .env 文件
├─ 配置微信开放平台
└─ 验证配置

测试阶段
├─ 本地测试（使用 ngrok）
├─ 测试微信登录流程
└─ 测试信息完善流程

部署阶段
├─ 运行部署脚本
├─ 上传代码
├─ 重启服务
└─ 更新 Nginx

验证阶段
├─ 使用检查清单验证
├─ 测试生产环境
└─ 监控日志

完成
```

---

## 📞 技术支持

如果遇到问题：

1. **查阅文档**
   - 先查阅相关文档
   - 检查常见问题章节

2. **查看日志**
   - 后端日志：`journalctl -u lingzhi-api -f`
   - Nginx 日志：`tail -f /var/log/nginx/error.log`

3. **联系支持**
   - 邮箱：support@example.com
   - 电话：400-XXX-XXXX
   - 工作时间：周一至周五 9:00-18:00

---

## ✅ 部署成功标准

当以下条件全部满足时，表示部署成功：

- [ ] 微信登录按钮可正常显示和点击
- [ ] 可跳转到微信授权页面
- [ ] 授权成功后可正常回调
- [ ] 用户可正常创建/登录
- [ ] 首次登录可跳转到信息完善页面
- [ ] 信息可正常提交和保存
- [ ] 无日志错误
- [ ] API 接口响应正常

---

## 📊 文档统计

| 文档名称 | 页数 | 主要内容 |
|---------|------|---------|
| 微信登录集成指南.md | ~15 | 功能介绍和配置说明 |
| 微信登录功能完成总结.md | ~10 | 完成情况总结 |
| 微信登录功能详细操作指南.md | ~30 | 详细操作步骤（推荐） |
| 微信登录功能部署检查清单.md | ~20 | 部署验证清单 |
| 微信登录功能部署文档索引.md | ~10 | 本文档 |
| **总计** | **~85** | **完整文档体系** |

---

## 🎉 祝您部署顺利！

按照以上文档和步骤，您可以成功完成微信登录功能的部署。

如有任何问题，请随时联系技术支持。

**文档版本：** v1.0
**最后更新：** 2026-02-01
