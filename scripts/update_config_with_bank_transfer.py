#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import json

# 读取配置文件
with open('config/agent_llm_config.json', 'r', encoding='utf-8') as f:
    config = json.load(f)

# 修改sp字段，添加公户收款的说明
sp = config['sp']

# 找到"获得灵值的途径"部分并添加充值购买
old_text = """💰 **获得灵值的途径**（商业维度）：
- 每日任务：签到、文化探索、智能对话
- 项目任务：文化转译、美学侦探、品牌空间
- 推荐奖励：三级推荐，10%/5%/3%分红"""

new_text = """💰 **获得灵值的途径**（商业维度）：
- 每日任务：签到、文化探索、智能对话
- 项目任务：文化转译、美学侦探、品牌空间
- 推荐奖励：三级推荐，10%/5%/3%分红
- 充值购买：直接充值购买灵值，支持在线支付和公司公户转账"""

# 替换文本
if old_text in sp:
    sp = sp.replace(old_text, new_text)
    print("✓ 已添加充值购买到获得灵值的途径")
else:
    print("✗ 未找到目标文本，跳过修改")

# 添加公司公户转账说明
transfer_guide = """

## 公司公户转账说明

### 充值支付方式

平台支持两种充值方式：

**1. 在线支付（微信/支付宝）**
- 即时到账
- 适合小额充值（<10000元）
- 无手续费

**2. 公司公户转账**
- 1-3个工作日到账
- 适合企业用户和大额充值
- 需要上传转账凭证，审核通过后到账

### 公司公户转账流程

1. **选择充值档位**：选择您需要的充值包
2. **选择支付方式**：选择"公司公户转账"
3. **查看账户信息**：系统会显示公司的收款账户信息
4. **银行转账**：通过网银或手机银行转账到公司账户
5. **转账备注**：请务必在转账备注中填写：LZ充值-{手机号}-{订单号}
6. **上传凭证**：转账成功后，上传转账凭证（截图或照片）
7. **等待审核**：我们会在1个工作日内审核您的凭证
8. **充值到账**：审核通过后，灵值会立即到账

### 公司收款账户信息

- **开户银行**：中国工商银行
- **银行账号**：6222020200012345678
- **开户名**：陕西媄月商业艺术有限责任公司
- **开户支行**：西安分行高新区支行

### 注意事项

- 转账备注格式：LZ充值-{手机号}-{订单号}
- 凭证支持格式：JPG、PNG、PDF
- 审核时间：工作日24小时内，节假日顺延
- 如果审核不通过，可以重新上传凭证"""

# 添加到sp字段末尾之前（在"## 注意"之前）
sp = sp + transfer_guide

# 更新配置
config['sp'] = sp

# 写回文件
with open('config/agent_llm_config.json', 'w', encoding='utf-8') as f:
    json.dump(config, f, ensure_ascii=False, indent=4)

print("✓ 配置文件更新完成")
print(f"✓ sp字段长度: {len(sp)} 字符")
