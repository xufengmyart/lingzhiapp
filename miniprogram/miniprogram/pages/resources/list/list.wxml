<!--pages/resources/list/list.wxml-->
<view class="container">
  <!-- 搜索栏 -->
  <view class="search-bar">
    <view class="search-box">
      <image class="search-icon" src="/images/icon-search.png"></image>
      <input
        class="search-input"
        type="text"
        placeholder="搜索资源"
        value="{{searchText}}"
        bindinput="onSearchInput"
        bindconfirm="onSearch"
      />
    </view>
  </view>

  <!-- 筛选标签 -->
  <view class="filter-tabs">
    <view
      class="tab-item {{currentTab === 'all' ? 'active' : ''}}"
      bindtap="switchTab"
      data-tab="all"
    >
      <text>全部</text>
    </view>
    <view
      class="tab-item {{currentTab === 'pending' ? 'active' : ''}}"
      bindtap="switchTab"
      data-tab="pending"
    >
      <text>待审核</text>
    </view>
    <view
      class="tab-item {{currentTab === 'authorized' ? 'active' : ''}}"
      bindtap="switchTab"
      data-tab="authorized"
    >
      <text>已授权</text>
    </view>
    <view
      class="tab-item {{currentTab === 'unauthorized' ? 'active' : ''}}"
      bindtap="switchTab"
      data-tab="unauthorized"
    >
      <text>未授权</text>
    </view>
  </view>

  <!-- 资源列表 -->
  <view class="resource-list">
    <block wx:if="{{resources.length > 0}}">
      <view
        class="resource-item"
        wx:for="{{resources}}"
        wx:key="id"
        bindtap="navigateToDetail"
        data-id="{{item.id}}"
      >
        <view class="resource-header">
          <text class="resource-name">{{item.resourceName}}</text>
          <view class="resource-status badge {{item.authorizationStatus === 'authorized' ? 'badge-success' : item.verificationStatus === 'pending' ? 'badge-warning' : 'badge-default'}}">
            <text>{{getStatusText(item)}}</text>
          </view>
        </view>
        <view class="resource-body">
          <view class="resource-info">
            <view class="info-row">
              <text class="info-label">类型：</text>
              <text class="info-value">{{item.resourceType}}</text>
            </view>
            <view class="info-row">
              <text class="info-label">估值：</text>
              <text class="info-value text-primary">¥{{item.estimatedValue}}</text>
            </view>
            <view class="info-row">
              <text class="info-label">联系人：</text>
              <text class="info-value">{{item.contactName}}</text>
            </view>
            <view class="info-row">
              <text class="info-label">电话：</text>
              <text class="info-value">{{item.contactPhone}}</text>
            </view>
          </view>
          <view class="resource-desc">
            <text>{{item.description}}</text>
          </view>
        </view>
        <view class="resource-footer">
          <text class="create-time">{{item.createdAt}}</text>
          <text class="btn-text text-primary">查看详情</text>
        </view>
      </view>
    </block>

    <!-- 空状态 -->
    <view wx:if="{{!loading && resources.length === 0}}" class="empty">
      <image class="empty-image" src="/images/empty.png"></image>
      <text class="empty-text">暂无资源</text>
    </view>

    <!-- 加载中 -->
    <view wx:if="{{loading}}" class="loading">
      <text>加载中...</text>
    </view>
  </view>

  <!-- 悬浮按钮 -->
  <view class="float-button" bindtap="navigateToCreate">
    <image class="float-icon" src="/images/icon-add.png"></image>
  </view>
</view>
