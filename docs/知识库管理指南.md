# 知识库管理指南

## 概述

本指南说明如何使用知识库管理工具将公司文件导入到知识库中，丰富智能体的知识储备。

## 知识库管理工具

### 位置
`admin-backend/scripts/init_knowledge_base.py`

### 功能
- 导入公司文档到知识库
- 自动文本分块和向量化
- 支持语义搜索
- 提供知识库内容查询

### 使用方法

#### 1. 初始化知识库（导入所有文件）

```bash
cd admin-backend
python scripts/init_knowledge_base.py
```

这将导入以下核心文档：
- `assets/公司简介.md` - 媄月公司简介
- `assets/灵值生态一体化服务总纲.md` - 生态核心文档
- `assets/西安文化关键词库.md` - 110个文化关键词
- `assets/西安文化基因库.md` - 文化基因库
- `assets/转译商业案例库.md` - 商业案例库

#### 2. 手动导入单个文件

```python
from scripts.init_knowledge_base import init_knowledge_client, import_file

# 初始化客户端
client = init_knowledge_client()

# 导入文件
import_file(client, "path/to/your/file.md", dataset_name="lingzhi_knowledge")
```

#### 3. 搜索知识库

```python
from scripts.init_knowledge_base import init_knowledge_client, search_knowledge

# 初始化客户端
client = init_knowledge_client()

# 搜索内容
search_knowledge(client, "媄月公司的使命是什么？")
```

## 已导入的知识库内容

### 1. 公司简介 (assets/公司简介.md)
- 公司定位：数字时代精神家园的架构师与共建者
- 核心使命：让中华文明的精神内核转化为可体验、可参与、可拥有的现代生活
- 三层架构：价值创造层、平台网络层、数字资产层
- 驱动飞轮：信仰-价值双螺旋

### 2. 灵值生态一体化服务总纲 (assets/灵值生态一体化服务总纲.md)
- 生态全景与核心心法
- "三层一飞轮"架构详解
- 文化商业转译六式
- 贡献值体系（通用、商家、专家）

### 3. 西安文化关键词库 (assets/西安文化关键词库.md)
- 110个西安文化关键词
- 十大分类：都城气象、盛唐意象、历史地标、哲学思想、生活美学、非遗技艺、古地名、人物传说、现代风貌、自然风物
- 每个关键词包含简要说明和转译提示

### 4. 西安文化基因库 (assets/西安文化基因库.md)
- 文化基因的定义和分类
- 遗产基因、生活基因、精神基因、艺术基因
- 文化解码方法

### 5. 转译商业案例库 (assets/转译商业案例库.md)
- 空间场景化案例
- 产品符号化案例
- IP沉浸化案例
- 人格情绪化案例
- 仪式当代化案例
- 资源凭证化案例

## 智能体集成

### 在智能体对话中使用知识库

智能体在回答用户问题时，会自动从知识库中检索相关信息，提供更准确的回答。

例如：
- 用户问："媄月公司的核心架构是什么？"
- 智能体会从知识库中检索到"三层一飞轮"架构，并提供详细解释

### 知识库数据集名称
- 默认数据集：`lingzhi_knowledge`
- 智能体会优先检索此数据集

## 维护和更新

### 添加新文档

1. 将新文档添加到 `assets/` 目录
2. 修改 `init_knowledge_base.py` 中的 `files_to_import` 列表
3. 重新运行导入脚本

### 更新现有文档

1. 修改文档内容
2. 重新运行导入脚本（会覆盖旧文档）

### 搜索验证

导入后，使用搜索功能验证内容是否正确导入：
```bash
python scripts/init_knowledge_base.py
# 查看搜索结果
```

## 技术细节

### 文本分块配置
- 分隔符：`\n\n`（双换行）
- 最大块大小：1500 tokens
- 自动去除多余空格

### 数据集名称
- 默认：`lingzhi_knowledge`
- 可自定义（修改 `dataset_name` 参数）

### 支持的文件格式
- Markdown (.md)
- 纯文本 (.txt)
- ReStructuredText (.rst)

## 常见问题

### Q: 如何查看已导入的文档列表？
A: 当前版本不支持列出文档，建议使用搜索功能验证内容。

### Q: 导入失败怎么办？
A: 检查：
1. 文件路径是否正确
2. 文件编码是否为 UTF-8
3. 网络连接是否正常
4. 知识库服务是否可用

### Q: 如何删除已导入的文档？
A: 当前版本不支持删除功能，如需重新导入，直接覆盖即可。

### Q: 知识库容量限制是多少？
A: 暂无明确限制，但建议：
- 单个文档不超过 100KB
- 总文档数量不超过 1000 个

## 最佳实践

1. **定期更新**：公司文档更新后，及时同步到知识库
2. **结构清晰**：使用 Markdown 格式，保持文档结构清晰
3. **关键词优化**：在文档中包含用户可能搜索的关键词
4. **分块合理**：长文档使用标题和段落合理分块
5. **测试验证**：导入后使用搜索功能验证效果

## 联系支持

如有问题，请联系技术支持团队。
